!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).fuzzball=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}},r={exports:{}};!function(t,r){(function(){var e,r,n,o,a,s,i,c,u,l,p,f,h,d,v;n=Math.floor,l=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,o,a,s){var i;if(null==o&&(o=0),null==s&&(s=r),o<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);o<a;)s(t,e[i=n((o+a)/2)])<0?a=i:o=i+1;return[].splice.apply(e,[o,o-o].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),d(e,0,e.length-1,n)},a=function(e,t){var n,o;return null==t&&(t=r),n=e.pop(),e.length?(o=e[0],e[0]=n,v(e,0,t)):o=n,o},c=function(e,t,n){var o;return null==n&&(n=r),o=e[0],e[0]=t,v(e,0,n),o},i=function(e,t,n){var o;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(o=[e[0],t])[0],e[0]=o[1],v(e,0,n)),t},o=function(e,t){var o,a,s,i,c,u;for(null==t&&(t=r),c=[],a=0,s=(i=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse()).length;a<s;a++)o=i[a],c.push(v(e,o,t));return c},h=function(e,t,n){var o;if(null==n&&(n=r),-1!==(o=e.indexOf(t)))return d(e,0,o,n),v(e,o,n)},p=function(e,t,n){var a,s,c,u,l;if(null==n&&(n=r),!(s=e.slice(0,t)).length)return s;for(o(s,n),c=0,u=(l=e.slice(t)).length;c<u;c++)a=l[c],i(s,a,n);return s.sort(n).reverse()},f=function(e,t,n){var s,i,c,p,f,h,d,v,y;if(null==n&&(n=r),10*t<=e.length){if(!(c=e.slice(0,t).sort(n)).length)return c;for(i=c[c.length-1],p=0,h=(d=e.slice(t)).length;p<h;p++)n(s=d[p],i)<0&&(u(c,s,0,null,n),c.pop(),i=c[c.length-1]);return c}for(o(e,n),y=[],f=0,v=l(t,e.length);0<=v?f<v:f>v;0<=v?++f:--f)y.push(a(e,n));return y},d=function(e,t,n,o){var a,s,i;for(null==o&&(o=r),a=e[n];n>t&&o(a,s=e[i=n-1>>1])<0;)e[n]=s,n=i;return e[n]=a},v=function(e,t,n){var o,a,s,i,c;for(null==n&&(n=r),a=e.length,c=t,s=e[t],o=2*t+1;o<a;)(i=o+1)<a&&!(n(e[o],e[i])<0)&&(o=i),e[t]=e[o],o=2*(t=o)+1;return e[t]=s,d(e,c,t,n)},e=function(){function Heap(e){this.cmp=null!=e?e:r,this.nodes=[]}return Heap.push=s,Heap.pop=a,Heap.replace=c,Heap.pushpop=i,Heap.heapify=o,Heap.updateItem=h,Heap.nlargest=p,Heap.nsmallest=f,Heap.prototype.push=function(e){return s(this.nodes,e,this.cmp)},Heap.prototype.pop=function(){return a(this.nodes,this.cmp)},Heap.prototype.peek=function(){return this.nodes[0]},Heap.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},Heap.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},Heap.prototype.pushpop=function(e){return i(this.nodes,e,this.cmp)},Heap.prototype.heapify=function(){return o(this.nodes,this.cmp)},Heap.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},Heap.prototype.clear=function(){return this.nodes=[]},Heap.prototype.empty=function(){return 0===this.nodes.length},Heap.prototype.size=function(){return this.nodes.length},Heap.prototype.clone=function(){var e;return(e=new Heap).nodes=this.nodes.slice(0),e},Heap.prototype.toArray=function(){return this.nodes.slice(0)},Heap.prototype.insert=Heap.prototype.push,Heap.prototype.top=Heap.prototype.peek,Heap.prototype.front=Heap.prototype.peek,Heap.prototype.has=Heap.prototype.contains,Heap.prototype.copy=Heap.prototype.clone,Heap}(),t.exports=e}).call(e)}(r);var n=r.exports;var o=function arrayMap$3(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},a="object"==typeof e&&e&&e.Object===Object&&e,s=a,i="object"==typeof self&&self&&self.Object===Object&&self,c=s||i||Function("return this")(),u=c.Symbol,l=u,p=Object.prototype,f=p.hasOwnProperty,h=p.toString,d=l?l.toStringTag:void 0;var v=function getRawTag$1(e){var t=f.call(e,d),r=e[d];try{e[d]=void 0;var n=!0}catch(e){}var o=h.call(e);return n&&(t?e[d]=r:delete e[d]),o},y=Object.prototype.toString;var g=v,m=function objectToString$1(e){return y.call(e)},_=u?u.toStringTag:void 0;var b=function baseGetTag$3(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_&&_ in Object(e)?g(e):m(e)};var w=function isObject$2(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},$=b,C=w;var k,j=function isFunction$2(e){if(!C(e))return!1;var t=$(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},O=c["__core-js_shared__"],x=(k=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var z=function isMasked$1(e){return!!x&&x in e},I=Function.prototype.toString;var A=function toSource$2(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""},S=j,H=z,P=w,E=A,L=/^\[object .+?Constructor\]$/,M=Function.prototype,R=Object.prototype,T=M.toString,F=R.hasOwnProperty,N=RegExp("^"+T.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var q=function baseIsNative$1(e){return!(!P(e)||H(e))&&(S(e)?N:L).test(E(e))},D=function getValue$1(e,t){return null==e?void 0:e[t]};var W=function getNative$7(e,t){var r=D(e,t);return q(r)?r:void 0},Q=W(Object,"create"),U=Q;var G=function hashClear$1(){this.__data__=U?U(null):{},this.size=0};var B=function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V=Q,K=Object.prototype.hasOwnProperty;var Z=function hashGet$1(e){var t=this.__data__;if(V){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return K.call(t,e)?t[e]:void 0},J=Q,X=Object.prototype.hasOwnProperty;var Y=Q;var ee=G,te=B,re=Z,ne=function hashHas$1(e){var t=this.__data__;return J?void 0!==t[e]:X.call(t,e)},oe=function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this};function Hash$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash$1.prototype.clear=ee,Hash$1.prototype.delete=te,Hash$1.prototype.get=re,Hash$1.prototype.has=ne,Hash$1.prototype.set=oe;var ae=Hash$1;var se=function listCacheClear$1(){this.__data__=[],this.size=0};var ie=function eq$1(e,t){return e===t||e!=e&&t!=t};var ce=function assocIndexOf$4(e,t){for(var r=e.length;r--;)if(ie(e[r][0],t))return r;return-1},ue=ce,le=Array.prototype.splice;var pe=ce;var fe=ce;var he=ce;var de=se,ve=function listCacheDelete$1(e){var t=this.__data__,r=ue(t,e);return!(r<0)&&(r==t.length-1?t.pop():le.call(t,r,1),--this.size,!0)},ye=function listCacheGet$1(e){var t=this.__data__,r=pe(t,e);return r<0?void 0:t[r][1]},ge=function listCacheHas$1(e){return fe(this.__data__,e)>-1},me=function listCacheSet$1(e,t){var r=this.__data__,n=he(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function ListCache$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache$1.prototype.clear=de,ListCache$1.prototype.delete=ve,ListCache$1.prototype.get=ye,ListCache$1.prototype.has=ge,ListCache$1.prototype.set=me;var _e=ListCache$1,be=W(c,"Map"),we=ae,$e=_e,Ce=be;var ke=function isKeyable$1(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var je=function getMapData$4(e,t){var r=e.__data__;return ke(t)?r["string"==typeof t?"string":"hash"]:r.map},Oe=je;var xe=je;var ze=je;var Ie=je;var Ae=function mapCacheClear$1(){this.size=0,this.__data__={hash:new we,map:new(Ce||$e),string:new we}},Se=function mapCacheDelete$1(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t},He=function mapCacheGet$1(e){return xe(this,e).get(e)},Pe=function mapCacheHas$1(e){return ze(this,e).has(e)},Ee=function mapCacheSet$1(e,t){var r=Ie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function MapCache$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache$1.prototype.clear=Ae,MapCache$1.prototype.delete=Se,MapCache$1.prototype.get=He,MapCache$1.prototype.has=Pe,MapCache$1.prototype.set=Ee;var Le=MapCache$1,Me=function setCacheAdd$1(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Re=function setCacheHas$1(e){return this.__data__.has(e)};function SetCache$3(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Le;++t<r;)this.add(e[t])}SetCache$3.prototype.add=SetCache$3.prototype.push=Me,SetCache$3.prototype.has=Re;var Te=SetCache$3;var Fe=function baseFindIndex$1(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1},Ne=function baseIsNaN$1(e){return e!=e},qe=function strictIndexOf$1(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1};var De=function baseIndexOf$1(e,t,r){return t==t?qe(e,t,r):Fe(e,Ne,r)};var We=function arrayIncludes$3(e,t){return!!(null==e?0:e.length)&&De(e,t,0)>-1};var Qe=function arrayIncludesWith$3(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1};var Ue=function baseUnary$2(e){return function(t){return e(t)}};var Ge=function cacheHas$3(e,t){return e.has(t)},Be=Te,Ve=We,Ke=Qe,Ze=o,Je=Ue,Xe=Ge,Ye=Math.min;var et=function baseIntersection$1(e,t,r){for(var n=r?Ke:Ve,o=e[0].length,a=e.length,s=a,i=Array(a),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=Ze(l,Je(t))),c=Ye(l.length,c),i[s]=!r&&(t||o>=120&&l.length>=120)?new Be(s&&l):void 0}l=e[0];var p=-1,f=i[0];e:for(;++p<o&&u.length<c;){var h=l[p],d=t?t(h):h;if(h=r||0!==h?h:0,!(f?Xe(f,d):n(u,d,r))){for(s=a;--s;){var v=i[s];if(!(v?Xe(v,d):n(e[s],d,r)))continue e}f&&f.push(d),u.push(h)}}return u};var tt=function identity$2(e){return e};var rt=function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},nt=Math.max;var ot=function overRest$1(e,t,r){return t=nt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=nt(n.length-t,0),s=Array(a);++o<a;)s[o]=n[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=n[o];return i[t]=r(s),rt(e,this,i)}};var at=function constant$1(e){return function(){return e}},st=W,it=function(){try{var e=st(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ct=at,ut=it,lt=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:ct(t),writable:!0})}:tt,pt=Date.now;var ft=function shortOut$1(e){var t=0,r=0;return function(){var n=pt(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},ht=ft(lt),dt=tt,vt=ot,yt=ht;var gt=function baseRest$2(e,t){return yt(vt(e,t,dt),e+"")};var mt=j,_t=function isLength$1(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var bt=function isObjectLike$3(e){return null!=e&&"object"==typeof e},wt=function isArrayLike$1(e){return null!=e&&_t(e.length)&&!mt(e)},$t=bt;var Ct=function isArrayLikeObject$2(e){return $t(e)&&wt(e)},kt=Ct;var jt=o,Ot=et,xt=function castArrayLikeObject$1(e){return kt(e)?e:[]},zt=gt((function(e){var t=jt(e,xt);return t.length&&t[0]===e[0]?Ot(t):[]})),It=Te,At=We,St=Qe,Ht=o,Pt=Ue,Et=Ge;var Lt=function baseDifference$1(e,t,r,n){var o=-1,a=At,s=!0,i=e.length,c=[],u=t.length;if(!i)return c;r&&(t=Ht(t,Pt(r))),n?(a=St,s=!1):t.length>=200&&(a=Et,s=!1,t=new It(t));e:for(;++o<i;){var l=e[o],p=null==r?l:r(l);if(l=n||0!==l?l:0,s&&p==p){for(var f=u;f--;)if(t[f]===p)continue e;c.push(l)}else a(t,p,n)||c.push(l)}return c};var Mt=function arrayPush$1(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Rt=b,Tt=bt;var Ft=function baseIsArguments$1(e){return Tt(e)&&"[object Arguments]"==Rt(e)},Nt=bt,qt=Object.prototype,Dt=qt.hasOwnProperty,Wt=qt.propertyIsEnumerable,Qt=Ft(function(){return arguments}())?Ft:function(e){return Nt(e)&&Dt.call(e,"callee")&&!Wt.call(e,"callee")},Ut=Qt,Gt=Array.isArray,Bt=Ut,Vt=Gt,Kt=u?u.isConcatSpreadable:void 0;var Zt=Mt,Jt=function isFlattenable$1(e){return Vt(e)||Bt(e)||!!(Kt&&e&&e[Kt])};var Xt=function baseFlatten$1(e,t,r,n,o){var a=-1,s=e.length;for(r||(r=Jt),o||(o=[]);++a<s;){var i=e[a];t>0&&r(i)?t>1?baseFlatten$1(i,t-1,r,n,o):Zt(o,i):n||(o[o.length]=i)}return o},Yt=Lt,er=Xt,tr=Ct,rr=gt((function(e,t){return tr(e)?Yt(e,er(t,1,tr,!0)):[]})),nr=W(c,"Set");var or=function setToArray$2(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},ar=nr,sr=function noop$1(){},ir=ar&&1/or(new ar([,-0]))[1]==1/0?function(e){return new ar(e)}:sr,cr=Te,ur=We,lr=Qe,pr=Ge,fr=ir,hr=or;var dr=function baseUniq$1(e,t,r){var n=-1,o=ur,a=e.length,s=!0,i=[],c=i;if(r)s=!1,o=lr;else if(a>=200){var u=t?null:fr(e);if(u)return hr(u);s=!1,o=pr,c=new cr}else c=t?[]:i;e:for(;++n<a;){var l=e[n],p=t?t(l):l;if(l=r||0!==l?l:0,s&&p==p){for(var f=c.length;f--;)if(c[f]===p)continue e;t&&c.push(p),i.push(l)}else o(c,p,r)||(c!==i&&c.push(p),i.push(l))}return i};var vr=function uniq(e){return e&&e.length?dr(e):[]},yr=W(c,"DataView"),gr=be,mr=W(c,"Promise"),_r=nr,br=W(c,"WeakMap"),wr=b,$r=A,Cr="[object Map]",kr="[object Promise]",jr="[object Set]",Or="[object WeakMap]",xr="[object DataView]",zr=$r(yr),Ir=$r(gr),Ar=$r(mr),Sr=$r(_r),Hr=$r(br),Pr=wr;(yr&&Pr(new yr(new ArrayBuffer(1)))!=xr||gr&&Pr(new gr)!=Cr||mr&&Pr(mr.resolve())!=kr||_r&&Pr(new _r)!=jr||br&&Pr(new br)!=Or)&&(Pr=function(e){var t=wr(e),r="[object Object]"==t?e.constructor:void 0,n=r?$r(r):"";if(n)switch(n){case zr:return xr;case Ir:return Cr;case Ar:return kr;case Sr:return jr;case Hr:return Or}return t});var Er={exports:{}};var Lr=function stubFalse(){return!1};!function(e,t){var r=c,n=Lr,o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,i=(s?s.isBuffer:void 0)||n;e.exports=i}(Er,Er.exports);var Mr={exports:{}};!function(e,t){var r=a,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,s=o&&o.exports===n&&r.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=i}(Mr,Mr.exports);var Rr=Mr.exports;Rr&&Rr.isTypedArray;var Tr;u&&u.iterator;try{Tr="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var Fr,Nr=function leven(e,t,r){var n=[],o=[],a=r&&Tr&&r.useCollator,s=1;if(r&&r.subcost&&"number"==typeof r.subcost&&(s=r.subcost),e===t)return 0;var i,c,u,l,p=Array.from(e),f=Array.from(t),h=p.length,d=f.length;if(0===h)return d;if(0===d)return h;for(var v=0,y=0;v<h;)o[v]=p[v].codePointAt(0),n[v]=++v;if(a)for(;y<d;)for(i=f[y].codePointAt(0),u=y++,c=y,v=0;v<h;v++)l=0===Tr.compare(String.fromCodePoint(i),String.fromCodePoint(o[v]))?u:u+s,u=n[v],c=n[v]=u>c?l>c?c+1:l:l>u?u+1:l;else for(;y<d;)for(i=f[y].codePointAt(0),u=y++,c=y,v=0;v<h;v++)l=i===o[v]?u:u+s,u=n[v],c=n[v]=u>c?l>c?c+1:l:l>u?u+1:l;return c};try{Fr="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var qr,Dr=function leven(e,t,r,n){var o=[],a=[],s=r&&Fr&&r.useCollator,i=1;if(r&&r.subcost&&"number"==typeof r.subcost&&(i=r.subcost),e===t)return 0;var c=e.length,u=t.length;if(0===c)return u;if(0===u)return c;if(r&&r.wildcards&&"string"==typeof r.wildcards&&r.wildcards.length>0){var l,p,f,h,d,v;if(!1===r.full_process&&!0!==r.processed){p=(l=r.wildcards[0]).charCodeAt(0);var y="["+function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(r.wildcards)+"]";if((e=e.replace(new RegExp(y,"g"),l))===(t=t.replace(new RegExp(y,"g"),l)))return 0}else p=(l=r.wildcards[0].toLowerCase()).charCodeAt(0);for(var g=0,m=0;g<c;)a[g]=e.charCodeAt(g),o[g]=++g;if(s)for(;m<u;)for(f=t.charCodeAt(m),d=m++,h=m,g=0;g<c;g++)v=0===Fr.compare(String.fromCharCode(f),String.fromCharCode(a[g]))||f===p||a[g]===p?d:d+i,d=o[g],h=o[g]=d>h?v>h?h+1:v:v>d?d+1:v;else for(;m<u;)for(f=t.charCodeAt(m),d=m++,h=m,g=0;g<c;g++)v=f===a[g]||f===p||a[g]===p?d:d+i,d=o[g],h=o[g]=d>h?v>h?h+1:v:v>d?d+1:v;return h}return n(e,t,r)};try{qr="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var Wr=function leven(e,t,r){var n=[],o=[],a=r&&qr&&r.useCollator,s=1;if(r&&r.subcost&&"number"==typeof r.subcost&&(s=r.subcost),e===t)return 0;var i,c,u,l,p=e.length,f=t.length;if(0===p)return f;if(0===f)return p;for(var h=0,d=0;h<p;)o[h]=e.charCodeAt(h),n[h]=++h;if(a)for(;d<f;)for(i=t.charCodeAt(d),u=d++,c=d,h=0;h<p;h++)l=0===qr.compare(String.fromCharCode(i),String.fromCharCode(o[h]))?u:u+s,u=n[h],c=n[h]=u>c?l>c?c+1:l:l>u?u+1:l;else for(;d<f;)for(i=t.charCodeAt(d),u=d++,c=d,h=0;h<p;h++)l=i===o[h]?u:u+s,u=n[h],c=n[h]=u>c?l>c?c+1:l:l>u?u+1:l;return c};!function(e,t){if(!e.setImmediate){var r,n=1,o={},a=!1,s=e.document,i=Object.getPrototypeOf&&Object.getPrototypeOf(e);i=i&&i.setTimeout?i:e,"[object process]"==={}.toString.call(e.process)?function installNextTickImplementation(){r=function(e){process.nextTick((function(){runIfPresent(e)}))}}():!function canUsePostMessage(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?function installMessageChannelImplementation(){var e=new MessageChannel;e.port1.onmessage=function(e){runIfPresent(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function installReadyStateChangeImplementation(){var e=s.documentElement;r=function(t){var r=s.createElement("script");r.onreadystatechange=function(){runIfPresent(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function installSetTimeoutImplementation(){r=function(e){setTimeout(runIfPresent,0,e)}}():function installPostMessageImplementation(){var t="setImmediate$"+Math.random()+"$",onGlobalMessage=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&runIfPresent(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",onGlobalMessage,!1):e.attachEvent("onmessage",onGlobalMessage),r=function(r){e.postMessage(t+r,"*")}}(),i.setImmediate=function setImmediate(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return o[n]=s,r(n),n++},i.clearImmediate=clearImmediate}function clearImmediate(e){delete o[e]}function runIfPresent(e){if(a)setTimeout(runIfPresent,0,e);else{var t=o[e];if(t){a=!0;try{!function run(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{clearImmediate(e),a=!1}}}}}("undefined"==typeof self?e:self);var Qr={exports:{}};return function(e){e.exports=function(t,r,n,o){return(e={}).dedupe=function dedupe(e,a){var s,i=t(a);if(!r(e)&&"object"!=typeof e)throw new Error("contains_dupes must be an array or object");if(0===Object.keys(e).length)return void 0!==typeof console&&console.warn("contains_dupes is empty"),[];i.limit&&(void 0!==typeof console&&console.warn("options.limit will be ignored in dedupe"),i.limit=0),i.cutoff&&"number"==typeof i.cutoff||(void 0!==typeof console&&console.warn("Using default cutoff of 70"),i.cutoff=70),i.scorer||(i.scorer=n,void 0!==typeof console&&console.log("Using default scorer 'ratio' for dedupe")),s=i.processor&&"function"==typeof i.processor?i.processor:function(e){return e};var c={};for(var u in e){var l=s(e[u]);if("string"!=typeof l&&l instanceof String==!1)throw new Error("Each processed item in dedupe must be a string.");var p=o(l,e,i);i.returnObjects?(1===p.length||(p=p.sort((function(e,t){var r=s(e.choice),n=s(t.choice),o=r.length,a=n.length;return o===a?r<n?-1:1:a-o}))),i.keepmap?c[s(p[0].choice)]={item:p[0].choice,key:p[0].key,matches:p}:c[s(p[0].choice)]={item:p[0].choice,key:p[0].key}):(1===p.length||(p=p.sort((function(e,t){var r=s(e[0]),n=s(t[0]),o=r.length,a=n.length;return o===a?r<n?-1:1:a-o}))),i.keepmap?c[s(p[0][0])]=[p[0][0],p[0][2],p]:c[s(p[0][0])]=[p[0][0],p[0][2]])}var f=[];for(var h in c)f.push(c[h]);return f},e}}(Qr),function(){var e=n,r=zt,o=rr,a=Nr,s=Dr,i=Wr,c=function(e,t,r){var n={},o=Dr,a=Wr;function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function validate(e){return("string"==typeof e||e instanceof String)&&e.length>0}n.validate=validate,n.process_and_sort=function process_and_sort(e){return validate(e)?e.match(/\S+/g).sort().join(" ").trim():""},n.tokenize=function unique_tokens(n,s){if(s&&s.wildcards&&t&&r){var i=r(o,s,a);return t(n.match(/\S+/g),(function(e,t){return 0===i(e,t)}))}return e(n.match(/\S+/g))};const s=/[^\p{L}\p{N}]/gu;return n.full_process=function full_process(e,t){if(!(e instanceof String)&&"string"!=typeof e)return"";var r;if(t&&"object"==typeof t&&t.wildcards&&"string"==typeof t.wildcards&&t.wildcards.length>0){var n=t.wildcards.toLowerCase();if(e=e.toLowerCase(),t.force_ascii){var o="[^\0 -|"+escapeRegExp(n)+"]";e=e.replace(new RegExp(o,"g"),"");var a="["+escapeRegExp(n)+"]",i=n[0];e=e.replace(new RegExp(a,"g"),i);var c="[^A-Za-z0-9"+escapeRegExp(n)+"]";r=(e=(e=e.replace(new RegExp(c,"g")," ")).replace(/_/g," ")).trim()}else{var u="[^\\p{L}\\p{N}|"+escapeRegExp(n)+"]";e=e.replace(new RegExp(u,"gu")," "),a="["+escapeRegExp(n)+"]",i=n[0],r=(e=e.replace(new RegExp(a,"g"),i)).trim()}}else t&&(t.force_ascii||!0===t)&&(r=(e=e.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim()),r=e.replace(s," ").toLowerCase().trim();return t&&t.collapseWhitespace&&(r=r.replace(/\s+/g," ")),r},n.clone_and_set_option_defaults=function(e){if(e&&e.isAClone)return e;var t={isAClone:!0};if(e){var r,n=Object.keys(e);for(r=0;r<n.length;r++)t[n[r]]=e[n[r]]}return!1!==t.full_process&&(t.full_process=!0),!0!==t.force_ascii&&(t.force_ascii=!1),!1!==t.normalize&&!0===t.astral&&(t.normalize=!0),!1!==t.collapseWhitespace&&(t.collapseWhitespace=!0),t},n.isCustomFunc=function(e){return"function"!=typeof e||"token_set_ratio"!==e.name&&"partial_token_set_ratio"!==e.name&&"token_sort_ratio"!==e.name&&"partial_token_sort_ratio"!==e.name&&"QRatio"!==e.name&&"WRatio"!==e.name&&"distance"!==e.name&&"partial_ratio"!==e.name},n}(vr),u=c.validate,l=c.process_and_sort,p=c.tokenize,f=c.full_process,h=c.clone_and_set_option_defaults,d=c.isCustomFunc;void 0===Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var v=Qr.exports(h,Array.isArray,QRatio,extract).dedupe;function QRatio(e,t,r){var n=h(r);return e=n.normalize?e.normalize():e,t=n.normalize?t.normalize():t,e=n.full_process?f(e,n):e,t=n.full_process?f(t,n):t,u(e)&&u(t)?_ratio(e,t,n):0}function extract(t,r,n){var o,a=h(n),s=!1;if(r&&r.length&&Array.isArray(r))o=r.length,s=!0;else{if(!(r instanceof Object))throw new Error("Invalid choices");o=Object.keys(r).length}if(!r||0===o)return void 0!==typeof console&&console.warn("No choices"),[];if(a.processor&&"function"!=typeof a.processor)throw new Error("Invalid Processor");if(a.processor||(a.processor=function(e){return e}),a.scorer&&"function"!=typeof a.scorer)throw new Error("Invalid Scorer");a.scorer||(a.scorer=QRatio);var i=d(a.scorer);a.cutoff&&"number"==typeof a.cutoff||(a.cutoff=-1);var pre_processor=function(e,t){return e};a.full_process&&(pre_processor=f,i||(a.processed=!0));var c=!1;i||(a.astral&&a.normalize&&(a.normalize=!1,String.prototype.normalize?(c=!0,t=t.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),t=pre_processor(t,a),a.full_process=!1,0===t.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var u,v,y,g,m,_=[],b=!1,w=!1,$=!1;if("token_sort_ratio"===a.scorer.name||"partial_token_sort_ratio"===a.scorer.name){var C=l(t);w=!0}else if("token_set_ratio"===a.scorer.name||"partial_token_set_ratio"===a.scorer.name){var k=p(t);$=!0}for(var j in a.returnObjects?(g=function(e,t){return e.score-t.score},m=function(e,t){return t.score-e.score}):(g=function(e,t){return e[1]-t[1]},m=function(e,t){return t[1]-e[1]}),r)(s||r.hasOwnProperty(j))&&(a.tokens=void 0,a.proc_sorted=!1,w?(a.proc_sorted=!0,r[j]&&r[j].proc_sorted?v=r[j].proc_sorted:(v=pre_processor(c?a.processor(r[j]).normalize():a.processor(r[j]),a),v=l(v)),y=a.scorer(C,v,a)):$?(v="x",r[j]&&r[j].tokens?(a.tokens=[k,r[j].tokens],a.trySimple&&(v=pre_processor(a.processor(r[j]),a))):(v=pre_processor(c?a.processor(r[j]).normalize():a.processor(r[j]),a),a.tokens=[k,p(v)]),y=a.scorer(t,v,a)):i?(v=a.processor(r[j]),y=a.scorer(t,v,a)):("string"==typeof(v=pre_processor(c?a.processor(r[j]).normalize():a.processor(r[j]),a))&&0!==v.length||(b=!0),y=a.scorer(t,v,a)),u=s?parseInt(j):j,y>a.cutoff&&(a.returnObjects?_.push({choice:r[j],score:y,key:u}):_.push([r[j],y,u])));return b&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),a.limit&&"number"==typeof a.limit&&a.limit>0&&a.limit<o&&!a.unsorted?_=e.nlargest(_,a.limit,g):a.unsorted||(_=_.sort(m)),_}function extractAsync(t,r,n,o){var a,s,i=h(n);"object"==typeof n.abortController&&(a=n.abortController),"object"==typeof n.cancelToken&&(s=n.cancelToken);var c=256;"number"==typeof i.asyncLoopOffset&&(c=i.asyncLoopOffset<1?1:i.asyncLoopOffset);var u,v=!1;if(r&&r.length&&Array.isArray(r))u=r.length,v=!0;else{if(!(r instanceof Object))return void o(new Error("Invalid choices"));u=Object.keys(r).length}if(!r||0===u)return void 0!==typeof console&&console.warn("No choices"),void o(null,[]);if(i.processor&&"function"!=typeof i.processor)o(new Error("Invalid Processor"));else if(i.processor||(i.processor=function(e){return e}),i.scorer&&"function"!=typeof i.scorer)o(new Error("Invalid Scorer"));else{i.scorer||(i.scorer=QRatio);var y=d(i.scorer);i.cutoff&&"number"==typeof i.cutoff||(i.cutoff=-1);var pre_processor=function(e,t){return e};i.full_process&&(pre_processor=f,y||(i.processed=!0));var g=!1;y||(i.astral&&i.normalize&&(i.normalize=!1,String.prototype.normalize?(g=!0,t=t.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),t=pre_processor(t,i),i.full_process=!1,0===t.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var m,_,b,w,$,C=[],k=!1,j=!1,O=!1;if("token_sort_ratio"===i.scorer.name||"partial_token_sort_ratio"===i.scorer.name){var x=l(t);j=!0}else if("token_set_ratio"===i.scorer.name||"partial_token_set_ratio"===i.scorer.name){var z=p(t);O=!0}i.returnObjects?(w=function(e,t){return e.score-t.score},$=function(e,t){return t.score-e.score}):(w=function(e,t){return e[1]-t[1]},$=function(e,t){return t[1]-e[1]});var I=Object.keys(r);v?searchLoop(0):searchLoop(I[0],0)}function searchLoop(n,f){(v||r.hasOwnProperty(n))&&(i.tokens=void 0,i.proc_sorted=!1,j?(i.proc_sorted=!0,r[n].proc_sorted?_=r[n].proc_sorted:(_=pre_processor(g?i.processor(r[n]).normalize():i.processor(r[n]),i),_=l(_)),b=i.scorer(x,_,i)):O?(_="x",r[n].tokens?(i.tokens=[z,r[n].tokens],i.trySimple&&(_=pre_processor(i.processor(r[n]),i))):(_=pre_processor(g?i.processor(r[n]).normalize():i.processor(r[n]),i),i.tokens=[z,p(_)]),b=i.scorer(t,_,i)):y?(_=i.processor(r[n]),b=i.scorer(t,_,i)):("string"==typeof(_=pre_processor(g?i.processor(r[n]).normalize():i.processor(r[n]),i))&&0!==_.length||(k=!0),b=i.scorer(t,_,i)),m=v?parseInt(n):n,b>i.cutoff&&(i.returnObjects?C.push({choice:r[n],score:b,key:m}):C.push([r[n],b,m]))),a&&!0===a.signal.aborted?o(new Error("aborted")):s&&!0===s.canceled?o(new Error("canceled")):v&&n<r.length-1?n%c==0?setImmediate((function(){searchLoop(n+1)})):searchLoop(n+1):f<I.length-1?f%c==0?setImmediate((function(){searchLoop(I[f+1],f+1)})):searchLoop(I[f+1],f+1):(k&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),i.limit&&"number"==typeof i.limit&&i.limit>0&&i.limit<u&&!i.unsorted?C=e.nlargest(C,i.limit,w):i.unsorted||(C=C.sort($)),o(null,C))}}function _ratio(e,t,r){return u(e)&&u(t)?(void 0===r.subcost&&(r.subcost=2),r.astral?(n=a(e,t,r),o=Array.from(e).length+Array.from(t).length):r.wildcards?(n=s(e,t,r,i),o=e.length+t.length):(n=i(e,t,r),o=e.length+t.length),Math.round((o-n)/o*100)):0;var n,o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var a,s,i=[];for(a in o)e.call(o,a)&&i.push(a);if(t)for(s=0;s<n;s++)e.call(o,r[s])&&i.push(r[s]);return i}}());var y=void 0;"undefined"!=typeof Promise&&(y=function(e,t,r){return new Promise((function(n,o){extractAsync(e,t,r,(function(e,t){e?o(e):n(t)}))}))});var g={distance:function distance(e,t,r){var n=h(r);return e=n.normalize?e.normalize():e,t=n.normalize?t.normalize():t,e=n.full_process?f(e,n):e,t=n.full_process?f(t,n):t,void 0===n.subcost&&(n.subcost=1),n.astral?a(e,t,n):s(e,t,n,i)},ratio:QRatio,token_set_ratio:function token_set_ratio(e,t,n){var a=h(n);return e=a.normalize?e.normalize():e,t=a.normalize?t.normalize():t,e=a.full_process?f(e,a):e,t=a.full_process?f(t,a):t,u(e)&&u(t)?function _token_set(e,t,n){if(n.tokens)a=n.tokens[0],s=n.tokens[1];else var a=p(e),s=p(t);var i=r(a,s),c=o(a,s),u=o(s,a),l=i.sort().join(" "),f=c.sort().join(" "),h=u.sort().join(" "),d=l+" "+f,v=l+" "+h;l=l.trim(),d=d.trim(),v=v.trim();var y=_ratio,g=[y(l,d,n),y(l,v,n),y(d,v,n)];n.trySimple&&g.push(y(e,t,n));return Math.max.apply(null,g)}(e,t,a):0},token_sort_ratio:function token_sort_ratio(e,t,r){var n=h(r);return e=n.normalize?e.normalize():e,t=n.normalize?t.normalize():t,e=n.full_process?f(e,n):e,t=n.full_process?f(t,n):t,u(e)&&u(t)?(n.proc_sorted||(e=l(e),t=l(t)),_ratio(e,t,n)):0},full_process:f,extract:extract,extractAsync:extractAsync,extractAsPromised:y,process_and_sort:l,unique_tokens:p,dedupe:v};t.exports=g}(),t.exports}));
