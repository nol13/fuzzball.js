!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).fuzzball=r()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r={exports:{}},t={exports:{}};!function(r,t){(function(){var e,t,n,o,a,s,i,c,u,l,p,f,h,d,v;n=Math.floor,l=Math.min,t=function(e,r){return e<r?-1:e>r?1:0},u=function(e,r,o,a,s){var i;if(null==o&&(o=0),null==s&&(s=t),o<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);o<a;)s(r,e[i=n((o+a)/2)])<0?a=i:o=i+1;return[].splice.apply(e,[o,o-o].concat(r)),r},s=function(e,r,n){return null==n&&(n=t),e.push(r),d(e,0,e.length-1,n)},a=function(e,r){var n,o;return null==r&&(r=t),n=e.pop(),e.length?(o=e[0],e[0]=n,v(e,0,r)):o=n,o},c=function(e,r,n){var o;return null==n&&(n=t),o=e[0],e[0]=r,v(e,0,n),o},i=function(e,r,n){var o;return null==n&&(n=t),e.length&&n(e[0],r)<0&&(r=(o=[e[0],r])[0],e[0]=o[1],v(e,0,n)),r},o=function(e,r){var o,a,s,i,c,u;for(null==r&&(r=t),c=[],a=0,s=(i=function(){u=[];for(var r=0,t=n(e.length/2);0<=t?r<t:r>t;0<=t?r++:r--)u.push(r);return u}.apply(this).reverse()).length;a<s;a++)o=i[a],c.push(v(e,o,r));return c},h=function(e,r,n){var o;if(null==n&&(n=t),-1!==(o=e.indexOf(r)))return d(e,0,o,n),v(e,o,n)},p=function(e,r,n){var a,s,c,u,l;if(null==n&&(n=t),!(s=e.slice(0,r)).length)return s;for(o(s,n),c=0,u=(l=e.slice(r)).length;c<u;c++)a=l[c],i(s,a,n);return s.sort(n).reverse()},f=function(e,r,n){var s,i,c,p,f,h,d,v,y;if(null==n&&(n=t),10*r<=e.length){if(!(c=e.slice(0,r).sort(n)).length)return c;for(i=c[c.length-1],p=0,h=(d=e.slice(r)).length;p<h;p++)n(s=d[p],i)<0&&(u(c,s,0,null,n),c.pop(),i=c[c.length-1]);return c}for(o(e,n),y=[],f=0,v=l(r,e.length);0<=v?f<v:f>v;0<=v?++f:--f)y.push(a(e,n));return y},d=function(e,r,n,o){var a,s,i;for(null==o&&(o=t),a=e[n];n>r&&o(a,s=e[i=n-1>>1])<0;)e[n]=s,n=i;return e[n]=a},v=function(e,r,n){var o,a,s,i,c;for(null==n&&(n=t),a=e.length,c=r,s=e[r],o=2*r+1;o<a;)(i=o+1)<a&&!(n(e[o],e[i])<0)&&(o=i),e[r]=e[o],o=2*(r=o)+1;return e[r]=s,d(e,c,r,n)},e=function(){function Heap(e){this.cmp=null!=e?e:t,this.nodes=[]}return Heap.push=s,Heap.pop=a,Heap.replace=c,Heap.pushpop=i,Heap.heapify=o,Heap.updateItem=h,Heap.nlargest=p,Heap.nsmallest=f,Heap.prototype.push=function(e){return s(this.nodes,e,this.cmp)},Heap.prototype.pop=function(){return a(this.nodes,this.cmp)},Heap.prototype.peek=function(){return this.nodes[0]},Heap.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},Heap.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},Heap.prototype.pushpop=function(e){return i(this.nodes,e,this.cmp)},Heap.prototype.heapify=function(){return o(this.nodes,this.cmp)},Heap.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},Heap.prototype.clear=function(){return this.nodes=[]},Heap.prototype.empty=function(){return 0===this.nodes.length},Heap.prototype.size=function(){return this.nodes.length},Heap.prototype.clone=function(){var e;return(e=new Heap).nodes=this.nodes.slice(0),e},Heap.prototype.toArray=function(){return this.nodes.slice(0)},Heap.prototype.insert=Heap.prototype.push,Heap.prototype.top=Heap.prototype.peek,Heap.prototype.front=Heap.prototype.peek,Heap.prototype.has=Heap.prototype.contains,Heap.prototype.copy=Heap.prototype.clone,Heap}(),r.exports=e}).call(e)}(t);var n=t.exports;var o=function arrayMap$3(e,r){for(var t=-1,n=null==e?0:e.length,o=Array(n);++t<n;)o[t]=r(e[t],t,e);return o},a="object"==typeof e&&e&&e.Object===Object&&e,s=a,i="object"==typeof self&&self&&self.Object===Object&&self,c=s||i||Function("return this")(),u=c.Symbol,l=u,p=Object.prototype,f=p.hasOwnProperty,h=p.toString,d=l?l.toStringTag:void 0;var v=function getRawTag$1(e){var r=f.call(e,d),t=e[d];try{e[d]=void 0;var n=!0}catch(e){}var o=h.call(e);return n&&(r?e[d]=t:delete e[d]),o},y=Object.prototype.toString;var g=v,m=function objectToString$1(e){return y.call(e)},_=u?u.toStringTag:void 0;var b=function baseGetTag$3(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_&&_ in Object(e)?g(e):m(e)};var w=function isObject$2(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)},$=b,C=w;var k,j=function isFunction$2(e){if(!C(e))return!1;var r=$(e);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},O=c["__core-js_shared__"],x=(k=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var z=function isMasked$1(e){return!!x&&x in e},I=Function.prototype.toString;var A=function toSource$2(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""},S=j,H=z,P=w,E=A,L=/^\[object .+?Constructor\]$/,M=Function.prototype,R=Object.prototype,T=M.toString,F=R.hasOwnProperty,N=RegExp("^"+T.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var q=function baseIsNative$1(e){return!(!P(e)||H(e))&&(S(e)?N:L).test(E(e))},D=function getValue$1(e,r){return null==e?void 0:e[r]};var W=function getNative$7(e,r){var t=D(e,r);return q(t)?t:void 0},Q=W(Object,"create"),U=Q;var G=function hashClear$1(){this.__data__=U?U(null):{},this.size=0};var B=function hashDelete$1(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},V=Q,K=Object.prototype.hasOwnProperty;var Z=function hashGet$1(e){var r=this.__data__;if(V){var t=r[e];return"__lodash_hash_undefined__"===t?void 0:t}return K.call(r,e)?r[e]:void 0},J=Q,X=Object.prototype.hasOwnProperty;var Y=Q;var ee=G,re=B,te=Z,ne=function hashHas$1(e){var r=this.__data__;return J?void 0!==r[e]:X.call(r,e)},oe=function hashSet$1(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Y&&void 0===r?"__lodash_hash_undefined__":r,this};function Hash$1(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Hash$1.prototype.clear=ee,Hash$1.prototype.delete=re,Hash$1.prototype.get=te,Hash$1.prototype.has=ne,Hash$1.prototype.set=oe;var ae=Hash$1;var se=function listCacheClear$1(){this.__data__=[],this.size=0};var ie=function eq$1(e,r){return e===r||e!=e&&r!=r};var ce=function assocIndexOf$4(e,r){for(var t=e.length;t--;)if(ie(e[t][0],r))return t;return-1},ue=ce,le=Array.prototype.splice;var pe=ce;var fe=ce;var he=ce;var de=se,ve=function listCacheDelete$1(e){var r=this.__data__,t=ue(r,e);return!(t<0)&&(t==r.length-1?r.pop():le.call(r,t,1),--this.size,!0)},ye=function listCacheGet$1(e){var r=this.__data__,t=pe(r,e);return t<0?void 0:r[t][1]},ge=function listCacheHas$1(e){return fe(this.__data__,e)>-1},me=function listCacheSet$1(e,r){var t=this.__data__,n=he(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this};function ListCache$1(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}ListCache$1.prototype.clear=de,ListCache$1.prototype.delete=ve,ListCache$1.prototype.get=ye,ListCache$1.prototype.has=ge,ListCache$1.prototype.set=me;var _e=ListCache$1,be=W(c,"Map"),we=ae,$e=_e,Ce=be;var ke=function isKeyable$1(e){var r=typeof e;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e};var je=function getMapData$4(e,r){var t=e.__data__;return ke(r)?t["string"==typeof r?"string":"hash"]:t.map},Oe=je;var xe=je;var ze=je;var Ie=je;var Ae=function mapCacheClear$1(){this.size=0,this.__data__={hash:new we,map:new(Ce||$e),string:new we}},Se=function mapCacheDelete$1(e){var r=Oe(this,e).delete(e);return this.size-=r?1:0,r},He=function mapCacheGet$1(e){return xe(this,e).get(e)},Pe=function mapCacheHas$1(e){return ze(this,e).has(e)},Ee=function mapCacheSet$1(e,r){var t=Ie(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this};function MapCache$1(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}MapCache$1.prototype.clear=Ae,MapCache$1.prototype.delete=Se,MapCache$1.prototype.get=He,MapCache$1.prototype.has=Pe,MapCache$1.prototype.set=Ee;var Le=MapCache$1,Me=function setCacheAdd$1(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Re=function setCacheHas$1(e){return this.__data__.has(e)};function SetCache$3(e){var r=-1,t=null==e?0:e.length;for(this.__data__=new Le;++r<t;)this.add(e[r])}SetCache$3.prototype.add=SetCache$3.prototype.push=Me,SetCache$3.prototype.has=Re;var Te=SetCache$3;var Fe=function baseFindIndex$1(e,r,t,n){for(var o=e.length,a=t+(n?1:-1);n?a--:++a<o;)if(r(e[a],a,e))return a;return-1},Ne=function baseIsNaN$1(e){return e!=e},qe=function strictIndexOf$1(e,r,t){for(var n=t-1,o=e.length;++n<o;)if(e[n]===r)return n;return-1};var De=function baseIndexOf$1(e,r,t){return r==r?qe(e,r,t):Fe(e,Ne,t)};var We=function arrayIncludes$3(e,r){return!!(null==e?0:e.length)&&De(e,r,0)>-1};var Qe=function arrayIncludesWith$3(e,r,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(r,e[n]))return!0;return!1};var Ue=function baseUnary$2(e){return function(r){return e(r)}};var Ge=function cacheHas$3(e,r){return e.has(r)},Be=Te,Ve=We,Ke=Qe,Ze=o,Je=Ue,Xe=Ge,Ye=Math.min;var er=function baseIntersection$1(e,r,t){for(var n=t?Ke:Ve,o=e[0].length,a=e.length,s=a,i=Array(a),c=1/0,u=[];s--;){var l=e[s];s&&r&&(l=Ze(l,Je(r))),c=Ye(l.length,c),i[s]=!t&&(r||o>=120&&l.length>=120)?new Be(s&&l):void 0}l=e[0];var p=-1,f=i[0];e:for(;++p<o&&u.length<c;){var h=l[p],d=r?r(h):h;if(h=t||0!==h?h:0,!(f?Xe(f,d):n(u,d,t))){for(s=a;--s;){var v=i[s];if(!(v?Xe(v,d):n(e[s],d,t)))continue e}f&&f.push(d),u.push(h)}}return u};var rr=function identity$2(e){return e};var tr=function apply$1(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)},nr=Math.max;var or=function overRest$1(e,r,t){return r=nr(void 0===r?e.length-1:r,0),function(){for(var n=arguments,o=-1,a=nr(n.length-r,0),s=Array(a);++o<a;)s[o]=n[r+o];o=-1;for(var i=Array(r+1);++o<r;)i[o]=n[o];return i[r]=t(s),tr(e,this,i)}};var ar=function constant$1(e){return function(){return e}},sr=W,ir=function(){try{var e=sr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),cr=ar,ur=ir,lr=ur?function(e,r){return ur(e,"toString",{configurable:!0,enumerable:!1,value:cr(r),writable:!0})}:rr,pr=Date.now;var fr=function shortOut$1(e){var r=0,t=0;return function(){var n=pr(),o=16-(n-t);if(t=n,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}},hr=fr(lr),dr=rr,vr=or,yr=hr;var gr=function baseRest$2(e,r){return yr(vr(e,r,dr),e+"")};var mr=j,_r=function isLength$1(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var br=function isObjectLike$3(e){return null!=e&&"object"==typeof e},wr=function isArrayLike$1(e){return null!=e&&_r(e.length)&&!mr(e)},$r=br;var Cr=function isArrayLikeObject$2(e){return $r(e)&&wr(e)},kr=Cr;var jr=o,Or=er,xr=function castArrayLikeObject$1(e){return kr(e)?e:[]},zr=gr((function(e){var r=jr(e,xr);return r.length&&r[0]===e[0]?Or(r):[]})),Ir=Te,Ar=We,Sr=Qe,Hr=o,Pr=Ue,Er=Ge;var Lr=function baseDifference$1(e,r,t,n){var o=-1,a=Ar,s=!0,i=e.length,c=[],u=r.length;if(!i)return c;t&&(r=Hr(r,Pr(t))),n?(a=Sr,s=!1):r.length>=200&&(a=Er,s=!1,r=new Ir(r));e:for(;++o<i;){var l=e[o],p=null==t?l:t(l);if(l=n||0!==l?l:0,s&&p==p){for(var f=u;f--;)if(r[f]===p)continue e;c.push(l)}else a(r,p,n)||c.push(l)}return c};var Mr=function arrayPush$1(e,r){for(var t=-1,n=r.length,o=e.length;++t<n;)e[o+t]=r[t];return e},Rr=b,Tr=br;var Fr=function baseIsArguments$1(e){return Tr(e)&&"[object Arguments]"==Rr(e)},Nr=br,qr=Object.prototype,Dr=qr.hasOwnProperty,Wr=qr.propertyIsEnumerable,Qr=Fr(function(){return arguments}())?Fr:function(e){return Nr(e)&&Dr.call(e,"callee")&&!Wr.call(e,"callee")},Ur=Qr,Gr=Array.isArray,Br=Ur,Vr=Gr,Kr=u?u.isConcatSpreadable:void 0;var Zr=Mr,Jr=function isFlattenable$1(e){return Vr(e)||Br(e)||!!(Kr&&e&&e[Kr])};var Xr=function baseFlatten$1(e,r,t,n,o){var a=-1,s=e.length;for(t||(t=Jr),o||(o=[]);++a<s;){var i=e[a];r>0&&t(i)?r>1?baseFlatten$1(i,r-1,t,n,o):Zr(o,i):n||(o[o.length]=i)}return o},Yr=Lr,et=Xr,rt=Cr,tt=gr((function(e,r){return rt(e)?Yr(e,et(r,1,rt,!0)):[]})),nt=W(c,"Set");var ot=function setToArray$2(e){var r=-1,t=Array(e.size);return e.forEach((function(e){t[++r]=e})),t},at=nt,st=function noop$1(){},it=at&&1/ot(new at([,-0]))[1]==1/0?function(e){return new at(e)}:st,ct=Te,ut=We,lt=Qe,pt=Ge,ft=it,ht=ot;var dt=function baseUniq$1(e,r,t){var n=-1,o=ut,a=e.length,s=!0,i=[],c=i;if(t)s=!1,o=lt;else if(a>=200){var u=r?null:ft(e);if(u)return ht(u);s=!1,o=pt,c=new ct}else c=r?[]:i;e:for(;++n<a;){var l=e[n],p=r?r(l):l;if(l=t||0!==l?l:0,s&&p==p){for(var f=c.length;f--;)if(c[f]===p)continue e;r&&c.push(p),i.push(l)}else o(c,p,t)||(c!==i&&c.push(p),i.push(l))}return i};var vt=function uniq(e){return e&&e.length?dt(e):[]},yt=W(c,"DataView"),gt=be,mt=W(c,"Promise"),_t=nt,bt=W(c,"WeakMap"),wt=b,$t=A,Ct="[object Map]",kt="[object Promise]",jt="[object Set]",Ot="[object WeakMap]",xt="[object DataView]",zt=$t(yt),It=$t(gt),At=$t(mt),St=$t(_t),Ht=$t(bt),Pt=wt;(yt&&Pt(new yt(new ArrayBuffer(1)))!=xt||gt&&Pt(new gt)!=Ct||mt&&Pt(mt.resolve())!=kt||_t&&Pt(new _t)!=jt||bt&&Pt(new bt)!=Ot)&&(Pt=function(e){var r=wt(e),t="[object Object]"==r?e.constructor:void 0,n=t?$t(t):"";if(n)switch(n){case zt:return xt;case It:return Ct;case At:return kt;case St:return jt;case Ht:return Ot}return r});var Et={exports:{}};var Lt=function stubFalse(){return!1};!function(e,r){var t=c,n=Lt,o=r&&!r.nodeType&&r,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?t.Buffer:void 0,i=(s?s.isBuffer:void 0)||n;e.exports=i}(Et,Et.exports);var Mt={exports:{}};!function(e,r){var t=a,n=r&&!r.nodeType&&r,o=n&&e&&!e.nodeType&&e,s=o&&o.exports===n&&t.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=i}(Mt,Mt.exports);var Rt=Mt.exports;Rt&&Rt.isTypedArray;var Tt;u&&u.iterator;try{Tt="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var Ft,Nt=function leven(e,r,t){var n=[],o=[],a=t&&Tt&&t.useCollator,s=1;if(t&&t.subcost&&"number"==typeof t.subcost&&(s=t.subcost),e===r)return 0;var i,c,u,l,p=Array.from(e),f=Array.from(r),h=p.length,d=f.length;if(0===h)return d;if(0===d)return h;for(var v=0,y=0;v<h;)o[v]=p[v].codePointAt(0),n[v]=++v;if(a)for(;y<d;)for(i=f[y].codePointAt(0),u=y++,c=y,v=0;v<h;v++)l=0===Tt.compare(String.fromCodePoint(i),String.fromCodePoint(o[v]))?u:u+s,u=n[v],c=n[v]=u>c?l>c?c+1:l:l>u?u+1:l;else for(;y<d;)for(i=f[y].codePointAt(0),u=y++,c=y,v=0;v<h;v++)l=i===o[v]?u:u+s,u=n[v],c=n[v]=u>c?l>c?c+1:l:l>u?u+1:l;return c};try{Ft="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var qt,Dt=function leven(e,r,t,n){var o=[],a=[],s=t&&Ft&&t.useCollator,i=1;if(t&&t.subcost&&"number"==typeof t.subcost&&(i=t.subcost),e===r)return 0;var c=e.length,u=r.length;if(0===c)return u;if(0===u)return c;if(t&&t.wildcards&&"string"==typeof t.wildcards&&t.wildcards.length>0){var l,p,f,h,d,v;if(!1===t.full_process&&!0!==t.processed){p=(l=t.wildcards[0]).charCodeAt(0);var y="["+function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t.wildcards)+"]";if((e=e.replace(new RegExp(y,"g"),l))===(r=r.replace(new RegExp(y,"g"),l)))return 0}else p=(l=t.wildcards[0].toLowerCase()).charCodeAt(0);for(var g=0,m=0;g<c;)a[g]=e.charCodeAt(g),o[g]=++g;if(s)for(;m<u;)for(f=r.charCodeAt(m),d=m++,h=m,g=0;g<c;g++)v=0===Ft.compare(String.fromCharCode(f),String.fromCharCode(a[g]))||f===p||a[g]===p?d:d+i,d=o[g],h=o[g]=d>h?v>h?h+1:v:v>d?d+1:v;else for(;m<u;)for(f=r.charCodeAt(m),d=m++,h=m,g=0;g<c;g++)v=f===a[g]||f===p||a[g]===p?d:d+i,d=o[g],h=o[g]=d>h?v>h?h+1:v:v>d?d+1:v;return h}return n(e,r,t)};try{qt="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var Wt=function leven(e,r,t){var n=[],o=[],a=t&&qt&&t.useCollator,s=1;if(t&&t.subcost&&"number"==typeof t.subcost&&(s=t.subcost),e===r)return 0;var i,c,u,l,p=e.length,f=r.length;if(0===p)return f;if(0===f)return p;for(var h=0,d=0;h<p;)o[h]=e.charCodeAt(h),n[h]=++h;if(a)for(;d<f;)for(i=r.charCodeAt(d),u=d++,c=d,h=0;h<p;h++)l=0===qt.compare(String.fromCharCode(i),String.fromCharCode(o[h]))?u:u+s,u=n[h],c=n[h]=u>c?l>c?c+1:l:l>u?u+1:l;else for(;d<f;)for(i=r.charCodeAt(d),u=d++,c=d,h=0;h<p;h++)l=i===o[h]?u:u+s,u=n[h],c=n[h]=u>c?l>c?c+1:l:l>u?u+1:l;return c};!function(e,r){if(!e.setImmediate){var t,n=1,o={},a=!1,s=e.document,i=Object.getPrototypeOf&&Object.getPrototypeOf(e);i=i&&i.setTimeout?i:e,"[object process]"==={}.toString.call(e.process)?function installNextTickImplementation(){t=function(e){process.nextTick((function(){runIfPresent(e)}))}}():!function canUsePostMessage(){if(e.postMessage&&!e.importScripts){var r=!0,t=e.onmessage;return e.onmessage=function(){r=!1},e.postMessage("","*"),e.onmessage=t,r}}()?e.MessageChannel?function installMessageChannelImplementation(){var e=new MessageChannel;e.port1.onmessage=function(e){runIfPresent(e.data)},t=function(r){e.port2.postMessage(r)}}():s&&"onreadystatechange"in s.createElement("script")?function installReadyStateChangeImplementation(){var e=s.documentElement;t=function(r){var t=s.createElement("script");t.onreadystatechange=function(){runIfPresent(r),t.onreadystatechange=null,e.removeChild(t),t=null},e.appendChild(t)}}():function installSetTimeoutImplementation(){t=function(e){setTimeout(runIfPresent,0,e)}}():function installPostMessageImplementation(){var r="setImmediate$"+Math.random()+"$",onGlobalMessage=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&runIfPresent(+t.data.slice(r.length))};e.addEventListener?e.addEventListener("message",onGlobalMessage,!1):e.attachEvent("onmessage",onGlobalMessage),t=function(t){e.postMessage(r+t,"*")}}(),i.setImmediate=function setImmediate(e){"function"!=typeof e&&(e=new Function(""+e));for(var r=new Array(arguments.length-1),a=0;a<r.length;a++)r[a]=arguments[a+1];var s={callback:e,args:r};return o[n]=s,t(n),n++},i.clearImmediate=clearImmediate}function clearImmediate(e){delete o[e]}function runIfPresent(e){if(a)setTimeout(runIfPresent,0,e);else{var r=o[e];if(r){a=!0;try{!function run(e){var r=e.callback,t=e.args;switch(t.length){case 0:r();break;case 1:r(t[0]);break;case 2:r(t[0],t[1]);break;case 3:r(t[0],t[1],t[2]);break;default:r.apply(void 0,t)}}(r)}finally{clearImmediate(e),a=!1}}}}}("undefined"==typeof self?e:self);var Qt={exports:{}};return function(e){e.exports=function(r,t,n,o){return(e={}).dedupe=function dedupe(e,a){var s,i=r(a);if(!t(e)&&"object"!=typeof e)throw new Error("contains_dupes must be an array or object");if(0===Object.keys(e).length)return void 0!==typeof console&&console.warn("contains_dupes is empty"),[];i.limit&&(void 0!==typeof console&&console.warn("options.limit will be ignored in dedupe"),i.limit=0),i.cutoff&&"number"==typeof i.cutoff||(void 0!==typeof console&&console.warn("Using default cutoff of 70"),i.cutoff=70),i.scorer||(i.scorer=n,void 0!==typeof console&&console.log("Using default scorer 'ratio' for dedupe")),s=i.processor&&"function"==typeof i.processor?i.processor:function(e){return e};var c={};for(var u in e){var l=s(e[u]);if("string"!=typeof l&&l instanceof String==!1)throw new Error("Each processed item in dedupe must be a string.");var p=o(l,e,i);i.returnObjects?(1===p.length||(p=p.sort((function(e,r){var t=s(e.choice),n=s(r.choice),o=t.length,a=n.length;return o===a?t<n?-1:1:a-o}))),i.keepmap?c[s(p[0].choice)]={item:p[0].choice,key:p[0].key,matches:p}:c[s(p[0].choice)]={item:p[0].choice,key:p[0].key}):(1===p.length||(p=p.sort((function(e,r){var t=s(e[0]),n=s(r[0]),o=t.length,a=n.length;return o===a?t<n?-1:1:a-o}))),i.keepmap?c[s(p[0][0])]=[p[0][0],p[0][2],p]:c[s(p[0][0])]=[p[0][0],p[0][2]])}var f=[];for(var h in c)f.push(c[h]);return f},e}}(Qt),function(){var e=n,t=zr,o=tt,a=Nt,s=Dt,i=Wt,c=function(e,r,t){var n={},o=Dt,a=Wt;function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function validate(e){return("string"==typeof e||e instanceof String)&&e.length>0}n.validate=validate,n.process_and_sort=function process_and_sort(e){return validate(e)?e.match(/\S+/g).sort().join(" ").trim():""},n.tokenize=function unique_tokens(n,s){if(s&&s.wildcards&&r&&t){var i=t(o,s,a);return r(n.match(/\S+/g),(function(e,r){return 0===i(e,r)}))}return e(n.match(/\S+/g))};const s=/[^\p{L}\p{N}]/gu;return n.full_process=function full_process(e,r){if(!(e instanceof String)&&"string"!=typeof e)return"";var t;if(r&&"object"==typeof r&&r.wildcards&&"string"==typeof r.wildcards&&r.wildcards.length>0){var n=r.wildcards.toLowerCase();if(e=e.toLowerCase(),r.force_ascii){var o="[^\0 -|"+escapeRegExp(n)+"]";e=e.replace(new RegExp(o,"g"),"");var a="["+escapeRegExp(n)+"]",i=n[0];e=e.replace(new RegExp(a,"g"),i);var c="[^A-Za-z0-9"+escapeRegExp(n)+"]";t=(e=(e=e.replace(new RegExp(c,"g")," ")).replace(/_/g," ")).trim()}else{var u="[^\\p{L}\\p{N}|"+escapeRegExp(n)+"]";e=e.replace(new RegExp(u,"gu")," "),a="["+escapeRegExp(n)+"]",i=n[0],t=(e=e.replace(new RegExp(a,"g"),i)).trim()}}else r&&(r.force_ascii||!0===r)&&(t=(e=e.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim()),t=e.replace(s," ").toLowerCase().trim();return r&&r.collapseWhitespace&&(t=t.replace(/\s+/g," ")),t},n.clone_and_set_option_defaults=function(e){if(e&&e.isAClone)return e;var r={isAClone:!0};if(e){var t,n=Object.keys(e);for(t=0;t<n.length;t++)r[n[t]]=e[n[t]]}return!1!==r.full_process&&(r.full_process=!0),!0!==r.force_ascii&&(r.force_ascii=!1),!1!==r.normalize&&!0===r.astral&&(r.normalize=!0),!1!==r.collapseWhitespace&&(r.collapseWhitespace=!0),r},n.isCustomFunc=function(e){return"function"!=typeof e||"token_set_ratio"!==e.name&&"partial_token_set_ratio"!==e.name&&"token_sort_ratio"!==e.name&&"partial_token_sort_ratio"!==e.name&&"QRatio"!==e.name&&"WRatio"!==e.name&&"distance"!==e.name&&"partial_ratio"!==e.name},n}(vt),u=c.validate,l=c.process_and_sort,p=c.tokenize,f=c.full_process,h=c.clone_and_set_option_defaults,d=c.isCustomFunc;void 0===Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var v=Qt.exports(h,Array.isArray,QRatio,extract).dedupe;function QRatio(e,r,t){var n=h(t);return e=n.normalize?e.normalize():e,r=n.normalize?r.normalize():r,e=n.full_process?f(e,n):e,r=n.full_process?f(r,n):r,u(e)&&u(r)?_ratio(e,r,n):0}function extract(r,t,n){var o,a=h(n),s=!1;if(t&&t.length&&Array.isArray(t))o=t.length,s=!0;else{if(!(t instanceof Object))throw new Error("Invalid choices");o=Object.keys(t).length}if(!t||0===o)return void 0!==typeof console&&console.warn("No choices"),[];if(a.processor&&"function"!=typeof a.processor)throw new Error("Invalid Processor");if(a.processor||(a.processor=function(e){return e}),a.scorer&&"function"!=typeof a.scorer)throw new Error("Invalid Scorer");a.scorer||(a.scorer=QRatio);var i=d(a.scorer);a.cutoff&&"number"==typeof a.cutoff||(a.cutoff=-1);var pre_processor=function(e,r){return e};a.full_process&&(pre_processor=f,i||(a.processed=!0));var c=!1;i||(a.astral&&a.normalize&&(a.normalize=!1,String.prototype.normalize?(c=!0,r=r.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),r=pre_processor(r,a),a.full_process=!1,0===r.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var u,v,y,g,m,_=[],b=!1,w=!1,$=!1;if("token_sort_ratio"===a.scorer.name||"partial_token_sort_ratio"===a.scorer.name){var C=l(r);w=!0}else if("token_set_ratio"===a.scorer.name||"partial_token_set_ratio"===a.scorer.name){var k=p(r);$=!0}for(var j in a.returnObjects?(g=function(e,r){return e.score-r.score},m=function(e,r){return r.score-e.score}):(g=function(e,r){return e[1]-r[1]},m=function(e,r){return r[1]-e[1]}),t)(s||t.hasOwnProperty(j))&&(a.tokens=void 0,a.proc_sorted=!1,w?(a.proc_sorted=!0,t[j]&&t[j].proc_sorted?v=t[j].proc_sorted:(v=pre_processor(c?a.processor(t[j]).normalize():a.processor(t[j]),a),v=l(v)),y=a.scorer(C,v,a)):$?(v="x",t[j]&&t[j].tokens?(a.tokens=[k,t[j].tokens],a.trySimple&&(v=pre_processor(a.processor(t[j]),a))):(v=pre_processor(c?a.processor(t[j]).normalize():a.processor(t[j]),a),a.tokens=[k,p(v)]),y=a.scorer(r,v,a)):i?(v=a.processor(t[j]),y=a.scorer(r,v,a)):("string"==typeof(v=pre_processor(c?a.processor(t[j]).normalize():a.processor(t[j]),a))&&0!==v.length||(b=!0),y=a.scorer(r,v,a)),u=s?parseInt(j):j,y>a.cutoff&&(a.returnObjects?_.push({choice:t[j],score:y,key:u}):_.push([t[j],y,u])));return b&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),a.limit&&"number"==typeof a.limit&&a.limit>0&&a.limit<o&&!a.unsorted?_=e.nlargest(_,a.limit,g):a.unsorted||(_=_.sort(m)),_}function extractAsync(r,t,n,o){var a,s,i=h(n);"object"==typeof n.abortController&&(a=n.abortController),"object"==typeof n.cancelToken&&(s=n.cancelToken);var c=256;"number"==typeof i.asyncLoopOffset&&(c=i.asyncLoopOffset<1?1:i.asyncLoopOffset);var u,v=!1;if(t&&t.length&&Array.isArray(t))u=t.length,v=!0;else{if(!(t instanceof Object))return void o(new Error("Invalid choices"));u=Object.keys(t).length}if(!t||0===u)return void 0!==typeof console&&console.warn("No choices"),void o(null,[]);if(i.processor&&"function"!=typeof i.processor)o(new Error("Invalid Processor"));else if(i.processor||(i.processor=function(e){return e}),i.scorer&&"function"!=typeof i.scorer)o(new Error("Invalid Scorer"));else{i.scorer||(i.scorer=QRatio);var y=d(i.scorer);i.cutoff&&"number"==typeof i.cutoff||(i.cutoff=-1);var pre_processor=function(e,r){return e};i.full_process&&(pre_processor=f,y||(i.processed=!0));var g=!1;y||(i.astral&&i.normalize&&(i.normalize=!1,String.prototype.normalize?(g=!0,r=r.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),r=pre_processor(r,i),i.full_process=!1,0===r.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var m,_,b,w,$,C=[],k=!1,j=!1,O=!1;if("token_sort_ratio"===i.scorer.name||"partial_token_sort_ratio"===i.scorer.name){var x=l(r);j=!0}else if("token_set_ratio"===i.scorer.name||"partial_token_set_ratio"===i.scorer.name){var z=p(r);O=!0}i.returnObjects?(w=function(e,r){return e.score-r.score},$=function(e,r){return r.score-e.score}):(w=function(e,r){return e[1]-r[1]},$=function(e,r){return r[1]-e[1]});var I=Object.keys(t);v?searchLoop(0):searchLoop(I[0],0)}function searchLoop(n,f){(v||t.hasOwnProperty(n))&&(i.tokens=void 0,i.proc_sorted=!1,j?(i.proc_sorted=!0,t[n].proc_sorted?_=t[n].proc_sorted:(_=pre_processor(g?i.processor(t[n]).normalize():i.processor(t[n]),i),_=l(_)),b=i.scorer(x,_,i)):O?(_="x",t[n].tokens?(i.tokens=[z,t[n].tokens],i.trySimple&&(_=pre_processor(i.processor(t[n]),i))):(_=pre_processor(g?i.processor(t[n]).normalize():i.processor(t[n]),i),i.tokens=[z,p(_)]),b=i.scorer(r,_,i)):y?(_=i.processor(t[n]),b=i.scorer(r,_,i)):("string"==typeof(_=pre_processor(g?i.processor(t[n]).normalize():i.processor(t[n]),i))&&0!==_.length||(k=!0),b=i.scorer(r,_,i)),m=v?parseInt(n):n,b>i.cutoff&&(i.returnObjects?C.push({choice:t[n],score:b,key:m}):C.push([t[n],b,m]))),a&&!0===a.signal.aborted?o(new Error("aborted")):s&&!0===s.canceled?o(new Error("canceled")):v&&n<t.length-1?n%c==0?setImmediate((function(){searchLoop(n+1)})):searchLoop(n+1):f<I.length-1?f%c==0?setImmediate((function(){searchLoop(I[f+1],f+1)})):searchLoop(I[f+1],f+1):(k&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),i.limit&&"number"==typeof i.limit&&i.limit>0&&i.limit<u&&!i.unsorted?C=e.nlargest(C,i.limit,w):i.unsorted||(C=C.sort($)),o(null,C))}}var y=!1;function _ratio(e,r,t){return u(e)&&u(r)?(void 0===t.subcost&&(t.subcost=2),t.astral?(t.normalize&&(String.prototype.normalize?(e=e.normalize(),r=r.normalize()):y||(void 0!==typeof console&&console.warn("Normalization not supported in your environment"),y=!0)),n=a(e,r,t),o=Array.from(e).length+Array.from(r).length):t.wildcards?(n=s(e,r,t,i),o=e.length+r.length):(n=i(e,r,t),o=e.length+r.length),Math.round((o-n)/o*100)):0;var n,o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=t.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var a,s,i=[];for(a in o)e.call(o,a)&&i.push(a);if(r)for(s=0;s<n;s++)e.call(o,t[s])&&i.push(t[s]);return i}}());var g=void 0;"undefined"!=typeof Promise&&(g=function(e,r,t){return new Promise((function(n,o){extractAsync(e,r,t,(function(e,r){e?o(e):n(r)}))}))});var m={distance:function distance(e,r,t){var n=h(t);return e=n.normalize?e.normalize():e,r=n.normalize?r.normalize():r,e=n.full_process?f(e,n):e,r=n.full_process?f(r,n):r,void 0===n.subcost&&(n.subcost=1),n.astral?a(e,r,n):s(e,r,n,i)},ratio:QRatio,token_set_ratio:function token_set_ratio(e,r,n){var a=h(n);return e=a.normalize?e.normalize():e,r=a.normalize?r.normalize():r,e=a.full_process?f(e,a):e,r=a.full_process?f(r,a):r,u(e)&&u(r)?function _token_set(e,r,n){if(n.tokens)a=n.tokens[0],s=n.tokens[1];else var a=p(e),s=p(r);var i=t(a,s),c=o(a,s),u=o(s,a),l=i.sort().join(" "),f=c.sort().join(" "),h=u.sort().join(" "),d=l+" "+f,v=l+" "+h;l=l.trim(),d=d.trim(),v=v.trim();var y=_ratio,g=[y(l,d,n),y(l,v,n),y(d,v,n)];n.trySimple&&g.push(y(e,r,n));return Math.max.apply(null,g)}(e,r,a):0},token_sort_ratio:function token_sort_ratio(e,r,t){var n=h(t);return e=n.normalize?e.normalize():e,r=n.normalize?r.normalize():r,e=n.full_process?f(e,n):e,r=n.full_process?f(r,n):r,u(e)&&u(r)?(n.proc_sorted||(e=l(e),r=l(r)),_ratio(e,r,n)):0},full_process:f,extract:extract,extractAsync:extractAsync,extractAsPromised:g,process_and_sort:l,unique_tokens:p,dedupe:v};r.exports=m}(),r.exports}));
